{
  "magic": "E!vIA5L86J2I",
  "timestamp": "2024-08-15T01:20:24.875941+00:00",
  "repo": "suhasHere/moq-e2ee-mls",
  "labels": [
    {
      "name": "bug",
      "description": "Something isn't working",
      "color": "d73a4a"
    },
    {
      "name": "documentation",
      "description": "Improvements or additions to documentation",
      "color": "0075ca"
    },
    {
      "name": "duplicate",
      "description": "This issue or pull request already exists",
      "color": "cfd3d7"
    },
    {
      "name": "enhancement",
      "description": "New feature or request",
      "color": "a2eeef"
    },
    {
      "name": "good first issue",
      "description": "Good for newcomers",
      "color": "7057ff"
    },
    {
      "name": "help wanted",
      "description": "Extra attention is needed",
      "color": "008672"
    },
    {
      "name": "invalid",
      "description": "This doesn't seem right",
      "color": "e4e669"
    },
    {
      "name": "question",
      "description": "Further information is requested",
      "color": "d876e3"
    },
    {
      "name": "wontfix",
      "description": "This will not be worked on",
      "color": "ffffff"
    }
  ],
  "issues": [
    {
      "number": 2,
      "id": "I_kwDOLa5NHM6Bwc5r",
      "title": "ANNOUNCE and SUBSCRIBE_NAMESPACE alternate flow",
      "url": "https://github.com/suhasHere/moq-e2ee-mls/issues/2",
      "state": "OPEN",
      "author": "afrind",
      "authorAssociation": "NONE",
      "assignees": [],
      "labels": [],
      "body": "Section 6.1 shows a flow where two clients ANNOUNCE the same Track Namespace to the same relay:\r\n\r\n```\r\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                                       \u250c\u2500\u2500\u2500\u2500\u2500\u2510                                       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502Joiner1\u2502                                       \u2502Relay\u2502                                       \u2502Joiner2\u2502\u2502Member\u2502\r\n\u2514\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2518                                       \u2514\u2500\u2500\u252c\u2500\u2500\u2518                                       \u2514\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2518\u2514\u2500\u2500\u252c\u2500\u2500\u2500\u2518\r\n    \u2502                                              \u2502                                              \u2502       \u2502\r\n    \u2502        Announce(mls-grp1|keypackages)        \u2502                                              \u2502       \u2502\r\n    \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500>\u2502                                              \u2502       \u2502\r\n    \u2502                                              \u2502                                              \u2502       \u2502\r\n    \u2502                                              \u2502        Announce(mls-grp1|keypackages)        \u2502       \u2502\r\n    \u2502                                              \u2502<\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502       \u2502\r\n    \u2502                                              \u2502                                              \u2502       \u2502\r\n```\r\n\r\nMy interpretation of ANNOUNCE_OK today is that the relay accepts the publisher as authoritative for the entire namespace -- eg: any SUBSCRIBE that matches the namespace can be sent to that publisher.  My read of this draft is that it departs from that concept: these publishers (Joiner1/2) are only authoritative for a *subset of the namespace*, and NAMESPACE_INFO is the mechanism by which a relay learns about the subset.\r\n\r\nI faced similar patterns with the moq-chat draft join flow, and to comply with current moq, made each participant's chat track belong to a namespace that was unique to the participant (https://afrind.github.io/draft-frindell-moq-chat/draft-frindell-moq-chat.html#section-4.4).  This led to the second problem: how do participants learn about the namespaces/tracks other clients have ANNOUNCED to the relay.  I originally filed https://github.com/moq-wg/moq-transport/issues/228, thinking there should be a mechanism by which a client can declare their interest in new announcements and become a catalog-less means of track discovery.  Based on wg feedback there, moq-chat now uses a different mechanism involving a simple catalog.  However, a variant of SUBSCRIBE_NAMESPACE is something I might have used -- \r\n\r\n```\r\nSUBSCRIBE_NAMESPACE {\r\n   Track Namespace Prefix (b),\r\n   Auth Info (b)\r\n }\r\n```\r\nThis would inform the relay to forward any **ANNOUNCE** with a prefix match.\r\n\r\nSo in moq-chat, each new participant would do this:\r\n \r\n```\r\nSUBSCRIBE_NAMESPACE(prefix=\"moq-chat/id/participant/\")\r\nANNOUNCE(namespace=\"moq-chat/id/participant/<name>\")\r\n```\r\nAnd a relay would reply with:\r\n\r\n```\r\nSUBSCRIBE_NAMESPACE_RESPONSE(\"ok\")\r\nANNOUCE_OK\r\n# existing announcements matching namespace prefix\r\nANNOUNCE(namespace=\"moq-chat/id/participant/<member1>\") \r\nANNOUNCE(namespace=\"moq-chat/id/participant/<member2>\")\r\nANNOUNCE(namespace=\"moq-chat/id/participant/<member3>\")\r\n...\r\n```\r\nIt would also forward any new ANNOUNCEs matching the prefix.\r\n \r\nThe new participant then issues standard SUBSCRIBE to each existing chat member\r\n \r\n```\r\nSUBSCRIBE(namespace=\"moq-chat/id/participant/<member1>\", name=\"chat\") \r\nSUBSCRIBE(namespace=\"moq-chat/id/participant/<member2>\", name=\"chat\") \r\n...\r\n```\r\n \r\nThis would remove the need for a catalog in moq-chat, but also keep the scope of ANNOUNCE the same as it is today.",
      "createdAt": "2024-03-09T00:39:32Z",
      "updatedAt": "2024-03-09T00:39:32Z",
      "closedAt": null,
      "comments": []
    }
  ],
  "pulls": [
    {
      "number": 1,
      "id": "PR_kwDOLa5NHM5ohWfY",
      "title": "CJ Reflow",
      "url": "https://github.com/suhasHere/moq-e2ee-mls/pull/1",
      "state": "MERGED",
      "author": "fluffy",
      "authorAssociation": "COLLABORATOR",
      "assignees": [],
      "labels": [],
      "body": "",
      "createdAt": "2024-03-03T21:04:21Z",
      "updatedAt": "2024-03-03T21:05:02Z",
      "baseRepository": "suhasHere/moq-e2ee-mls",
      "baseRefName": "main",
      "baseRefOid": "4a040c927737621468489ad3fbc349937edf6402",
      "headRepository": "suhasHere/moq-e2ee-mls",
      "headRefName": "cj1",
      "headRefOid": "c8df60af5b6a17660edbe11808bed73440734100",
      "closedAt": "2024-03-03T21:05:02Z",
      "mergedAt": "2024-03-03T21:05:02Z",
      "mergedBy": "fluffy",
      "mergeCommit": {
        "oid": "f792c4b15ae74749d3b7276d6b6e70f3c06ab458"
      },
      "comments": [],
      "reviews": []
    }
  ]
}